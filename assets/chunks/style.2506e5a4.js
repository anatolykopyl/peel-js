import{d as ct,h as Q,p as ut,w as x,o as lt,c as dt,z as U,r as V}from"./framework.8bc654d7.js";const ft={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_LEFT:2,BOTTOM_RIGHT:3};function gt(){var k=100,R=["webkit","moz",""],I="http://www.w3.org/2000/svg",c="peel-",T,O,u,p,b,w=document.documentElement,Z=w.style;function B(t){for(var e,n,i=0;i<R.length;i++)if(e=R[i],n=e?e+nt(t):t,n in Z)return n}function K(){T=B("clipPath"),O=B("transform"),u=B("boxShadow"),p=B("filter"),tt(),o.supported=!!(T&&O),o.effectsSupported=b}function tt(){var t=document.createElement("div"),e=t.style;e.cssText="background:linear-gradient(45deg,#9f9,white);",b=(e.backgroundImage||"").indexOf("gradient")>-1}function y(t){return Math.round(t*k)/k}function M(t){return Math.max(0,Math.min(1,t))}function Y(t,e,n){return(t-e)/(n-e)}function et(t,e){return(e||1)*2*(.5-Math.abs(t-.5))}function nt(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function it(t){return t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()})}function L(t){return c+t}function ot(t,e){t.style[T]=e}function _(t,e){t.style[O]=e}function st(t,e,n,i,s,r){t.style[u]=$(e,n,i,s,r)}function rt(t,e,n,i,s){t.style[p]="drop-shadow("+$(e,n,i,null,s)+")"}function $(t,e,n,i,s){return y(t)+"px "+y(e)+"px "+y(n)+"px "+(i?y(i)+"px ":"")+"rgba(0,0,0,"+y(s)+")"}function F(t,e){t.style.opacity=e}function H(t,e,n){if(b){var i;n.length===0?i="none":i="linear-gradient("+y(e)+"deg,"+n.join(",")+")",t.style.backgroundImage=i}}function z(t,e,n){t.addEventListener(e,n)}function N(t,e,n){t.removeEventListener(e,n)}function j(t,e){var n=t.changedTouches?t.changedTouches[0]:t;return{x:n.clientX-e.getBoundingClientRect().left,y:n.clientY-e.getBoundingClientRect().top}}function P(t,e){return q(0,0,0,t,e)}function D(t,e){return q(255,255,255,t,e)}function q(t,e,n,i,s){return i=y(M(i)),"rgba("+t+","+e+","+n+","+i+") "+y(s*100)+"%"}function X(t,e){return typeof t=="string"&&(t=(e||document).querySelector(t)),t}function at(t,e){var n=document.createElement("div");return A(n,e),t.appendChild(n),n}function A(t,e){t.classList.add(e)}function ht(t){return t.style.zIndex}function pt(t,e){t.style.zIndex=e}function C(t,e,n){e=e||w;var i=document.createElementNS(I,t);e.appendChild(i);for(var s in n)n.hasOwnProperty(s)&&G(i,s,n[s]);return i}function G(t,e,n){t.setAttributeNS(null,e,n)}function o(t,e){this.setOptions(e),this.el=X(t,w),this.constraints=[],this.events=[],this.dragHandlers=[],this.setupLayers(),this.setupDimensions(),this.setCorner(this.getOption("corner")),this.setMode(this.getOption("mode")),this.init()}o.Corners=ft,o.Defaults={topShadow:!0,topShadowBlur:5,topShadowAlpha:.5,topShadowOffsetX:0,topShadowOffsetY:1,topShadowCreatesShape:!0,backReflection:!1,backReflectionSize:.02,backReflectionOffset:0,backReflectionAlpha:.15,backReflectionDistribute:!0,backShadow:!0,backShadowSize:.04,backShadowOffset:0,backShadowAlpha:.1,backShadowDistribute:!0,bottomShadow:!0,bottomShadowSize:1.5,bottomShadowOffset:0,bottomShadowDarkAlpha:.7,bottomShadowLightAlpha:.1,bottomShadowDistribute:!0,setPeelOnInit:!0,clippingBoxScale:4,flipConstraintOffset:5,dragPreventsDefault:!0},o.prototype.setCorner=function(){var t=arguments;t[0]===void 0?t=[o.Corners.BOTTOM_RIGHT]:t[0].length&&(t=t[0]),this.corner=this.getPointOrCorner(t)},o.prototype.setMode=function(t){t==="book"?(this.addPeelConstraint(o.Corners.BOTTOM_LEFT),this.addPeelConstraint(o.Corners.TOP_LEFT),this.setOption("backReflection",!1),this.setOption("backShadowDistribute",!1),this.setOption("bottomShadowDistribute",!1)):t==="calendar"&&(this.addPeelConstraint(o.Corners.TOP_RIGHT),this.addPeelConstraint(o.Corners.TOP_LEFT))},o.prototype.setPeelPath=function(t,e){var n=arguments,i,s,r,h;i=new a(t,e),n.length===4?(s=new a(n[2],n[3]),this.path=new d(i,s)):n.length===8&&(r=new a(n[2],n[3]),h=new a(n[4],n[5]),s=new a(n[6],n[7]),this.path=new W(i,r,h,s))},o.prototype.handleDrag=function(t,e){this.dragHandlers.push(t),this.setupDragEvents(e)},o.prototype.handlePress=function(t,e){this.pressHandler=t,this.setupDragEvents(e)},o.prototype.setupDragEvents=function(t){var e=this,n,i,s;if(this.dragEventsSetup)return;t=t||this.el;function r(f,m){e.getOption("dragPreventsDefault")&&m.preventDefault(),i=f?"touchmove":"mousemove",s=f?"touchend":"mouseup",z(w,i,h),z(w,s,l),n=!1}function h(f){e.dragHandlers.forEach(m=>{g(m,f)}),n=!0}function l(f){!n&&e.pressHandler&&g(e.pressHandler,f),N(w,i,h),N(w,s,l)}function g(f,m){var J=j(m,e.el);f.call(e,m,J.x,J.y)}this.addEvent(t,"mousedown",r.bind(this,!1)),this.addEvent(t,"touchstart",r.bind(this,!0)),this.dragEventsSetup=!0},o.prototype.removeEvents=function(){this.events.forEach(function(t,e){N(t.el,t.type,t.handler)}),this.events=[]},o.prototype.setTimeAlongPath=function(t){t=M(t);var e=this.path.getPointForTime(t);this.timeAlongPath=t,this.setPeelPosition(e.x,e.y)},o.prototype.setFadeThreshold=function(t){this.fadeThreshold=t},o.prototype.setPeelPosition=function(){var t=this.getPointOrCorner(arguments);t=this.getConstrainedPeelPosition(t),t&&(this.peelLineSegment=this.getPeelLineSegment(t),this.peelLineRotation=this.peelLineSegment.getAngle(),this.setClipping(),this.setBackTransform(t),this.setEffects())},o.prototype.addPeelConstraint=function(){var t=this.getPointOrCorner(arguments),e=this.corner.subtract(t).getLength();this.constraints.push(new E(t,e)),this.calculateFlipConstraint()},o.prototype.setOption=function(t,e){this.options[t]=e},o.prototype.getOption=function(t){return this.options[it(t)]},o.prototype.getAmountClipped=function(){var t=this.getTopClipArea(),e=this.width*this.height;return Y(t,e,0)},o.prototype.addEvent=function(t,e,n){return z(t,e,n),this.events.push({el:t,type:e,handler:n}),n},o.prototype.getTopClipArea=function(){var t=new S;return this.elementBox.forEach(function(e){this.distributeLineByPeelLine(e,t)},this),S.getArea(t.getPoints())},o.prototype.calculateFlipConstraint=function(){var t=this.corner,e=this.constraints.concat();this.flipConstraint=e.sort(function(n,i){return t.y-n.center.y,t.y-i.center.y,n-i})[0]},o.prototype.dragStart=function(t,e,n){},o.prototype.fireHandler=function(t,e){var n=j(t,this.el);e.call(this,t,n.x,n.y)},o.prototype.setClipping=function(){var t=new S,e=new S;this.clippingBox.forEach(function(n){this.distributeLineByPeelLine(n,t,e)},this),this.topClip.setPoints(t.getPoints()),this.backClip.setPoints(e.getPoints())},o.prototype.distributeLineByPeelLine=function(t,e,n){var i=this.peelLineSegment.getIntersectPoint(t);this.distributePointByPeelLine(t.p1,e,n),this.distributePointByPeelLine(i,e,n)},o.prototype.distributePointByPeelLine=function(t,e,n){if(t){var i=this.peelLineSegment.getPointDeterminant(t);i<=0&&e.addPoint(t),i>=0&&n&&n.addPoint(this.flipPointHorizontally(t))}},o.prototype.setOptions=function(t){var e=t||{},n=o.Defaults;for(var i in n)!n.hasOwnProperty(i)||i in e||(e[i]=n[i]);this.options=e},o.prototype.findOrCreateLayer=function(t,e,n){var i=t+"-element",s=L(t),r=X(this.getOption(i)||"."+s,e);return r||(r=at(e,s)),A(r,L("layer")),pt(r,n),r},o.prototype.getPointOrCorner=function(t){return t.length===2?new a(t[0],t[1]):typeof t[0]=="number"?this.getCornerPoint(t[0]):t[0]},o.prototype.getCornerPoint=function(t){var e=+!!(t&1)*this.width,n=+!!(t&2)*this.height;return new a(e,n)},o.prototype.getOptionalShape=function(){var t=["rect","polygon","path","circle"],e;return t.some(function(n){var i=this.getOption(n),s;return i&&(s={},s.attributes=i,s.type=n,e=s),e},this),e},o.prototype.setupLayers=function(){var t=this.getOptionalShape(),e=this.topLayer=this.findOrCreateLayer("top",this.el,2),n=this.backLayer=this.findOrCreateLayer("back",this.el,3);this.bottomLayer=this.findOrCreateLayer("bottom",this.el,1),t?(this.topLayer=this.wrapShapeLayer(this.topLayer,"top-outer-clip"),this.backLayer=this.wrapShapeLayer(this.backLayer,"back-outer-clip"),this.topShapeClip=new v(e,t),this.backShapeClip=new v(n,t),this.bottomShapeClip=new v(this.bottomLayer,t),this.getOption("topShadowCreatesShape")&&(this.topShadowElement=this.setupDropShadow(t,e))):this.topShadowElement=this.findOrCreateLayer("top-shadow",e,1),this.topClip=new v(this.topLayer),this.backClip=new v(this.backLayer),this.backShadowElement=this.findOrCreateLayer("back-shadow",n,1),this.backReflectionElement=this.findOrCreateLayer("back-reflection",n,2),this.bottomShadowElement=this.findOrCreateLayer("bottom-shadow",this.bottomLayer,1),this.usesBoxShadow=!t},o.prototype.setupDropShadow=function(t,e){var n=C("svg",e,{class:L("layer")});return C(t.type,n,t.attributes),n},o.prototype.wrapShapeLayer=function(t,e){var n=ht(t);A(t,L("shape-layer"));var i=this.findOrCreateLayer(e,this.el,n);return i.appendChild(t),i},o.prototype.setupDimensions=function(){this.width=this.el.offsetWidth,this.height=this.el.offsetHeight,this.center=new a(this.width/2,this.height/2),this.elementBox=this.getScaledBox(1),this.clippingBox=this.getScaledBox(this.getOption("clippingBoxScale"))},o.prototype.getScaledBox=function(t){var e=t,n=t-1,i=new a(-this.width*n,-this.height*n),s=new a(this.width*e,-this.height*n),r=new a(this.width*e,this.height*e),h=new a(-this.width*n,this.height*e);return[new d(i,s),new d(s,r),new d(r,h),new d(h,i)]},o.prototype.getConstrainedPeelPosition=function(t){return this.constraints.forEach(function(e){var n=this.getFlipConstraintOffset(e,t);n&&(e=new E(e.center,e.radius-n)),t=e.constrainPoint(t)},this),t},o.prototype.getFlipConstraintOffset=function(t,e){var n=this.getOption("flipConstraintOffset");if(t===this.flipConstraint&&n){var i=this.corner.subtract(this.center),s=this.corner.subtract(t.center),r=s.getAngle();s.rotate(-r);var h=e.subtract(t.center).rotate(-r);if(i.x*i.y<0&&(h.y*=-1),h.x>0&&h.y>0)return Y(h.getAngle(),45,0)*n}},o.prototype.getPeelLineSegment=function(t){var e=this.corner.subtract(t).scale(.5),n=t.add(e);e.x===0&&e.y===0&&(e=t.subtract(this.center));var i=e.getLength(),s=Math.max(this.width,this.height)/i*10,r=e.rotate(-90).scale(s),h=n.add(r),l=n.subtract(r);return new d(h,l)},o.prototype.setBackTransform=function(t){var e=this.flipPointHorizontally(this.corner),n=(this.peelLineRotation-90)*2,i=t.subtract(e.rotate(n)),s="translate("+y(i.x)+"px, "+y(i.y)+"px) rotate("+y(n)+"deg)";_(this.backLayer,s),_(this.topShadowElement,s)},o.prototype.getPeelLineDistance=function(){var t,e,n,i;this.peelLineRotation<90?(t=o.Corners.TOP_RIGHT,e=o.Corners.BOTTOM_LEFT):this.peelLineRotation<180?(t=o.Corners.BOTTOM_RIGHT,e=o.Corners.TOP_LEFT):this.peelLineRotation<270?(t=o.Corners.BOTTOM_LEFT,e=o.Corners.TOP_RIGHT):this.peelLineRotation<360&&(t=o.Corners.TOP_LEFT,e=o.Corners.BOTTOM_RIGHT),n=this.getCornerPoint(t),i=this.getCornerPoint(e);var s=new d(n,i).scale(2),r=this.peelLineSegment.getIntersectPoint(s);if(!r)return 2;var h=n.subtract(r).getLength(),l=n.subtract(i).getLength();return h/l},o.prototype.setEffects=function(){var t=this.getPeelLineDistance();this.setTopShadow(t),this.setBackShadow(t),this.setBackReflection(t),this.setBottomShadow(t),this.setFade()},o.prototype.setTopShadow=function(t){if(this.getOption("topShadow")){var e=this.getOption("topShadowBlur"),n=this.getOption("topShadowOffsetX"),i=this.getOption("topShadowOffsetY"),s=this.getOption("topShadowAlpha"),r=this.exponential(t,5,s);this.usesBoxShadow?st(this.topShadowElement,n,i,e,0,r):rt(this.topShadowElement,n,i,e,r)}},o.prototype.distributeOrLinear=function(t,e,n){return e?et(t,n):t*n},o.prototype.exponential=function(t,e,n){return n*M(Math.pow(1+t,e)-1)},o.prototype.setBackReflection=function(t){var e=[];if(this.canSetLinearEffect("backReflection",t)){var n=this.getOption("backReflectionDistribute"),i=this.getOption("backReflectionSize"),s=this.getOption("backReflectionOffset"),r=this.getOption("backReflectionAlpha"),h=this.distributeOrLinear(t,n,i),l=t-s,g=l-h,f=g-h;e.push(D(0,0)),e.push(D(0,f)),e.push(D(r,g)),e.push(D(0,l))}H(this.backReflectionElement,180-this.peelLineRotation,e)},o.prototype.setBackShadow=function(t){var e=[];if(this.canSetLinearEffect("backShadow",t)){var n=this.getOption("backShadowSize"),i=this.getOption("backShadowOffset"),s=this.getOption("backShadowAlpha"),r=this.getOption("backShadowDistribute"),h=this.distributeOrLinear(t,r,n),l=t-i,g=l-h,f=g-h;e.push(P(0,0)),e.push(P(0,f)),e.push(P(s,g)),e.push(P(s,l))}H(this.backShadowElement,180-this.peelLineRotation,e)},o.prototype.setBottomShadow=function(t){var e=[];if(this.canSetLinearEffect("bottomShadow",t)){var n=this.getOption("bottomShadowSize"),i=this.getOption("bottomShadowOffset"),s=this.getOption("bottomShadowDarkAlpha"),r=this.getOption("bottomShadowLightAlpha"),h=this.getOption("bottomShadowDistribute"),l=t-(.025-i),g=l-this.distributeOrLinear(t,h,.03)*n-i,f=g-(.02*n-i);e=[P(0,0),P(0,f),P(r,g),P(r,l),P(s,t)]}H(this.bottomShadowElement,this.peelLineRotation+180,e)},o.prototype.canSetLinearEffect=function(t,e){return this.getOption(t)&&e>0},o.prototype.setFade=function(){var t=this.fadeThreshold,e=1,n;t&&(this.timeAlongPath!==void 0?n=this.timeAlongPath:n=this.getAmountClipped(),n>t&&(e=(1-n)/(1-t)),F(this.topLayer,e),F(this.backLayer,e),F(this.bottomShadowElement,e))},o.prototype.flipPointHorizontally=function(t){return new a(t.x-(t.x-this.center.x)*2,t.y)},o.prototype.init=function(){this.getOption("setPeelOnInit")&&this.setPeelPosition(this.corner),A(this.el,L("ready"))};function v(t,e){this.el=t,this.shape=v.createClipPath(t,e||{type:"polygon"}),_(this.el,"translate(0px,0px)")}v.getDefs=function(){return this.defs||(this.svg=C("svg",null,{class:L("svg-clip-element")}),this.defs=C("defs",this.svg)),this.defs},v.createClipPath=function(t,e){var n=v.getId(),i=C("clipPath",this.getDefs()),s=C(e.type,i,e.attributes);return G(i,"id",n),ot(t,"url(#"+n+")"),s},v.getId=function(){return"svg-clip-"+crypto.randomUUID()},v.prototype.setPoints=function(t){var e=t.map(function(n){return y(n.x)+","+y(n.y)}).join(" ");G(this.shape,"points",e)};function E(t,e){this.center=t,this.radius=e}E.prototype.containsPoint=function(t){if(this.boundingRectContainsPoint(t)){var e=this.center.x-t.x,n=this.center.y-t.y;e*=e,n*=n;var i=e+n,s=this.radius*this.radius;return i<=s}return!1},E.prototype.boundingRectContainsPoint=function(t){return t.x>=this.center.x-this.radius&&t.x<=this.center.x+this.radius&&t.y>=this.center.y-this.radius&&t.y<=this.center.y+this.radius},E.prototype.constrainPoint=function(t){if(!this.containsPoint(t)){var e=t.subtract(this.center).getAngle();t=this.center.add(new a(this.radius,0).rotate(e))}return t};function S(){this.points=[]}S.getArea=function(t){var e=0,n=0;return t.forEach(function(i,s,r){var h=r[(s+1)%r.length];e+=i.x*h.y,n+=i.y*h.x}),(e-n)/2},S.prototype.addPoint=function(t){this.points.push(t)},S.prototype.getPoints=function(){return this.points};function W(t,e,n,i){this.p1=t,this.c1=e,this.p2=i,this.c2=n}W.prototype.getPointForTime=function(t){var e=Math.pow(1-t,3),n=3*t*Math.pow(1-t,2),i=3*Math.pow(t,2)*(1-t),s=Math.pow(t,3),r=e*this.p1.x+n*this.c1.x+i*this.c2.x+s*this.p2.x,h=e*this.p1.y+n*this.c1.y+i*this.c2.y+s*this.p2.y;return new a(r,h)};function d(t,e){this.p1=t,this.p2=e}d.EPSILON=1e-6,d.prototype.getPointForTime=function(t){return this.p1.add(this.getVector().scale(t))},d.prototype.scale=function(t){var e=this.p1.add(this.p2.subtract(this.p1).scale(t)),n=this.p2.add(this.p1.subtract(this.p2).scale(t));return new d(e,n)},d.prototype.getPointDeterminant=function(t){var e=(t.x-this.p1.x)*(this.p2.y-this.p1.y)-(t.y-this.p1.y)*(this.p2.x-this.p1.x);return e>-d.EPSILON&&e<d.EPSILON&&(e=0),e},d.prototype.getIntersectPoint=function(t){var e=this;function n(f,m){return f.x*m.y-f.y*m.x}var i=e.p2.subtract(e.p1),s=t.p2.subtract(t.p1),r=n(t.p1.subtract(e.p1),i),h=n(i,s);if(h==0)return null;var l=r/h,g=n(t.p1.subtract(e.p1),s)/h;return g>=0&&g<=1&&l>=0&&l<=1?e.p1.add(i.scale(g)):null},d.prototype.getAngle=function(){return this.getVector().getAngle()},d.prototype.getVector=function(){return this.vector||(this.vector=this.p2.subtract(this.p1)),this.vector};function a(t,e){this.x=t,this.y=e}return a.DEGREES_IN_RADIANS=180/Math.PI,a.degToRad=function(t){return t/a.DEGREES_IN_RADIANS},a.radToDeg=function(t){for(var e=t*a.DEGREES_IN_RADIANS;e<0;)e+=360;return e},a.vector=function(t,e){var n=a.degToRad(t);return new a(Math.cos(n)*e,Math.sin(n)*e)},a.prototype.add=function(t){return new a(this.x+t.x,this.y+t.y)},a.prototype.subtract=function(t){return new a(this.x-t.x,this.y-t.y)},a.prototype.scale=function(t){return new a(this.x*t,this.y*t)},a.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},a.prototype.getAngle=function(){return a.radToDeg(Math.atan2(this.y,this.x))},a.prototype.setAngle=function(t){return a.vector(t,this.getLength())},a.prototype.rotate=function(t){return this.setAngle(this.getAngle()+t)},K(),o}const yt={class:"peel-top"},wt={class:"peel-back"},vt={class:"peel-bottom"},Pt=ct({__name:"Peel",props:{handleElement:null,peelPosition:null,corner:null,constraints:null,drag:{type:Boolean},mode:null,fadeThreshold:null,peelPath:null,options:null},emits:["drag"],setup(k,{expose:R,emit:I}){const c=k,T=gt(),O=Q(null),u=Q(null);return ut(()=>{u.value=new T(O.value,c.options),u.value.handleDrag((p,b,w)=>I("drag",{event:p,x:b,y:w,amountClipped:u.value.getAmountClipped()}),c.handleElement),c.drag&&u.value.handleDrag((p,b,w)=>u.value.setPeelPosition(b,w),c.handleElement),c.peelPosition&&u.value.setPeelPosition(c.peelPosition.x,c.peelPosition.y),c.corner&&u.value.setCorner(c.corner.x,c.corner.y),c.constraints&&c.constraints.forEach(p=>{u.value.addPeelConstraint(p)}),c.mode&&u.value.setMode(c.mode),c.fadeThreshold&&u.value.setFadeThreshold(c.fadeThreshold),c.peelPath&&u.value.setPeelPath(...c.peelPath)}),x(()=>c.peelPosition,p=>{p&&u.value.setPeelPosition(p.x,p.y)}),x(()=>c.corner,p=>{p&&u.value.setCorner(p.x,p.y)}),x(()=>c.constraints,p=>{p&&(u.value.constraints=[],p.forEach(b=>{u.value.addPeelConstraint(b)}))}),x(()=>c.mode,p=>{p&&u.value.setMode(p)}),x(()=>c.fadeThreshold,p=>{p&&u.value.setFadeThreshold(p)}),x(()=>c.peelPath,p=>{p&&u.value.setPeelPath(...p)}),R({peel:u}),(p,b)=>(lt(),dt("div",{ref_key:"peelRef",ref:O,class:"peel"},[U("div",yt,[V(p.$slots,"top")]),U("div",wt,[V(p.$slots,"back")]),U("div",vt,[V(p.$slots,"bottom")])],512))}});export{ft as d,Pt as m};
