import{d as ct,h as Z,p as ut,w as O,o as lt,c as dt,z as U,r as Y}from"./framework.8bc654d7.js";const ft={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_LEFT:2,BOTTOM_RIGHT:3};function gt(){var R=100,B=["webkit","moz",""],M="http://www.w3.org/2000/svg",c="peel-",E,L,u,T,a,l=document.documentElement,m=l.style;function D(t){for(var e,n,i=0;i<B.length;i++)if(e=B[i],n=e?e+nt(t):t,n in m)return n}function Q(){E=D("clipPath"),L=D("transform"),u=D("boxShadow"),T=D("filter"),tt(),o.supported=!!(E&&L),o.effectsSupported=a}function tt(){var t=document.createElement("div"),e=t.style;e.cssText="background:linear-gradient(45deg,#9f9,white);",a=(e.backgroundImage||"").indexOf("gradient")>-1}function v(t){return Math.round(t*R)/R}function _(t){return Math.max(0,Math.min(1,t))}function $(t,e,n){return(t-e)/(n-e)}function et(t,e){return(e||1)*2*(.5-Math.abs(t-.5))}function nt(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function it(t){return t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()})}function C(t){return c+t}function ot(t,e){t.style[E]=e}function F(t,e){t.style[L]=e}function rt(t,e,n,i,r,s){t.style[u]=j(e,n,i,r,s)}function st(t,e,n,i,r){t.style[T]="drop-shadow("+j(e,n,i,null,r)+")"}function j(t,e,n,i,r){return v(t)+"px "+v(e)+"px "+v(n)+"px "+(i?v(i)+"px ":"")+"rgba(0,0,0,"+v(r)+")"}function H(t,e){t.style.opacity=e}function z(t,e,n){if(a){var i;n.length===0?i="none":i="linear-gradient("+v(e)+"deg,"+n.join(",")+")",t.style.backgroundImage=i}}function N(t,e,n){t.addEventListener(e,n)}function G(t,e,n){t.removeEventListener(e,n)}function q(t,e){var n=t.changedTouches?t.changedTouches[0]:t;return{x:n.clientX-e.getBoundingClientRect().left,y:n.clientY-e.getBoundingClientRect().top}}function b(t,e){return X(0,0,0,t,e)}function A(t,e){return X(255,255,255,t,e)}function X(t,e,n,i,r){return i=v(_(i)),"rgba("+t+","+e+","+n+","+i+") "+v(r*100)+"%"}function W(t,e){return typeof t=="string"&&(t=(e||document).querySelector(t)),t}function at(t,e){var n=document.createElement("div");return I(n,e),t.appendChild(n),n}function I(t,e){t.classList.add(e)}function ht(t){return t.style.zIndex}function pt(t,e){t.style.zIndex=e}function x(t,e,n){e=e||l;var i=document.createElementNS(M,t);e.appendChild(i);for(var r in n)n.hasOwnProperty(r)&&V(i,r,n[r]);return i}function V(t,e,n){t.setAttributeNS(null,e,n)}function o(t,e){this.setOptions(e),this.el=W(t,l),this.constraints=[],this.events=[],this.dragHandlers=[],this.setupLayers(),this.setupDimensions(),this.setCorner(this.getOption("corner")),this.setMode(this.getOption("mode")),this.init()}o.Corners=ft,o.Defaults={topShadow:!0,topShadowBlur:5,topShadowAlpha:.5,topShadowOffsetX:0,topShadowOffsetY:1,topShadowCreatesShape:!0,backReflection:!1,backReflectionSize:.02,backReflectionOffset:0,backReflectionAlpha:.15,backReflectionDistribute:!0,backShadow:!0,backShadowSize:.04,backShadowOffset:0,backShadowAlpha:.1,backShadowDistribute:!0,bottomShadow:!0,bottomShadowSize:1.5,bottomShadowOffset:0,bottomShadowDarkAlpha:.7,bottomShadowLightAlpha:.1,bottomShadowDistribute:!0,setPeelOnInit:!0,clippingBoxScale:4,flipConstraintOffset:5,dragPreventsDefault:!0},o.prototype.setCorner=function(){var t=arguments;t[0]===void 0?t=[o.Corners.BOTTOM_RIGHT]:t[0].length&&(t=t[0]),this.corner=this.getPointOrCorner(t)},o.prototype.setMode=function(t){t==="book"?(this.addPeelConstraint(o.Corners.BOTTOM_LEFT),this.addPeelConstraint(o.Corners.TOP_LEFT),this.setOption("backReflection",!1),this.setOption("backShadowDistribute",!1),this.setOption("bottomShadowDistribute",!1)):t==="calendar"&&(this.addPeelConstraint(o.Corners.TOP_RIGHT),this.addPeelConstraint(o.Corners.TOP_LEFT))},o.prototype.setPeelPath=function(t,e){var n=arguments,i,r,s,p;i=new h(t,e),n.length===4?(r=new h(n[2],n[3]),this.path=new f(i,r)):n.length===8&&(s=new h(n[2],n[3]),p=new h(n[4],n[5]),r=new h(n[6],n[7]),this.path=new J(i,s,p,r))},o.prototype.handleDrag=function(t,e){this.dragHandlers.push(t),this.setupDragEvents(e)},o.prototype.handlePress=function(t,e){this.pressHandler=t,this.setupDragEvents(e)},o.prototype.setupDragEvents=function(t){var e=this,n,i,r;if(this.dragEventsSetup)return;t=t||this.el;function s(g,P){e.getOption("dragPreventsDefault")&&P.preventDefault(),i=g?"touchmove":"mousemove",r=g?"touchend":"mouseup",N(l,i,p),N(l,r,d),n=!1}function p(g){e.dragHandlers.forEach(P=>{y(P,g)}),n=!0}function d(g){!n&&e.pressHandler&&y(e.pressHandler,g),G(l,i,p),G(l,r,d)}function y(g,P){var K=q(P,e.el);g.call(e,P,K.x,K.y)}this.addEvent(t,"mousedown",s.bind(this,!1)),this.addEvent(t,"touchstart",s.bind(this,!0)),this.dragEventsSetup=!0},o.prototype.removeEvents=function(){this.events.forEach(function(t,e){G(t.el,t.type,t.handler)}),this.events=[]},o.prototype.setTimeAlongPath=function(t){t=_(t);var e=this.path.getPointForTime(t);this.timeAlongPath=t,this.setPeelPosition(e.x,e.y)},o.prototype.setFadeThreshold=function(t){this.fadeThreshold=t},o.prototype.setPeelPosition=function(){var t=this.getPointOrCorner(arguments);t=this.getConstrainedPeelPosition(t),t&&(this.peelLineSegment=this.getPeelLineSegment(t),this.peelLineRotation=this.peelLineSegment.getAngle(),this.setClipping(),this.setBackTransform(t),this.setEffects())},o.prototype.addPeelConstraint=function(){var t=this.getPointOrCorner(arguments),e=this.corner.subtract(t).getLength();this.constraints.push(new k(t,e)),this.calculateFlipConstraint()},o.prototype.setOption=function(t,e){this.options[t]=e},o.prototype.getOption=function(t){return this.options[it(t)]},o.prototype.getAmountClipped=function(){var t=this.getTopClipArea(),e=this.width*this.height;return $(t,e,0)},o.prototype.addEvent=function(t,e,n){return N(t,e,n),this.events.push({el:t,type:e,handler:n}),n},o.prototype.getTopClipArea=function(){var t=new S;return this.elementBox.forEach(function(e){this.distributeLineByPeelLine(e,t)},this),S.getArea(t.getPoints())},o.prototype.calculateFlipConstraint=function(){var t=this.corner,e=this.constraints.concat();this.flipConstraint=e.sort(function(n,i){return t.y-n.center.y,t.y-i.center.y,n-i})[0]},o.prototype.dragStart=function(t,e,n){},o.prototype.fireHandler=function(t,e){var n=q(t,this.el);e.call(this,t,n.x,n.y)},o.prototype.setClipping=function(){var t=new S,e=new S;this.clippingBox.forEach(function(n){this.distributeLineByPeelLine(n,t,e)},this),this.topClip.setPoints(t.getPoints()),this.backClip.setPoints(e.getPoints())},o.prototype.distributeLineByPeelLine=function(t,e,n){var i=this.peelLineSegment.getIntersectPoint(t);this.distributePointByPeelLine(t.p1,e,n),this.distributePointByPeelLine(i,e,n)},o.prototype.distributePointByPeelLine=function(t,e,n){if(t){var i=this.peelLineSegment.getPointDeterminant(t);i<=0&&e.addPoint(t),i>=0&&n&&n.addPoint(this.flipPointHorizontally(t))}},o.prototype.setOptions=function(t){var e=t||{},n=o.Defaults;for(var i in n)!n.hasOwnProperty(i)||i in e||(e[i]=n[i]);this.options=e},o.prototype.findOrCreateLayer=function(t,e,n){var i=t+"-element",r=C(t),s=W(this.getOption(i)||"."+r,e);return s||(s=at(e,r)),I(s,C("layer")),pt(s,n),s},o.prototype.getPointOrCorner=function(t){return t.length===2?new h(t[0],t[1]):typeof t[0]=="number"?this.getCornerPoint(t[0]):t[0]},o.prototype.getCornerPoint=function(t){var e=+!!(t&1)*this.width,n=+!!(t&2)*this.height;return new h(e,n)},o.prototype.getOptionalShape=function(){var t=["rect","polygon","path","circle"],e;return t.some(function(n){var i=this.getOption(n),r;return i&&(r={},r.attributes=i,r.type=n,e=r),e},this),e},o.prototype.setupLayers=function(){var t=this.getOptionalShape(),e=this.topLayer=this.findOrCreateLayer("top",this.el,2),n=this.backLayer=this.findOrCreateLayer("back",this.el,3);this.bottomLayer=this.findOrCreateLayer("bottom",this.el,1),t?(this.topLayer=this.wrapShapeLayer(this.topLayer,"top-outer-clip"),this.backLayer=this.wrapShapeLayer(this.backLayer,"back-outer-clip"),this.topShapeClip=new w(e,t),this.backShapeClip=new w(n,t),this.bottomShapeClip=new w(this.bottomLayer,t),this.getOption("topShadowCreatesShape")&&(this.topShadowElement=this.setupDropShadow(t,e))):this.topShadowElement=this.findOrCreateLayer("top-shadow",e,1),this.topClip=new w(this.topLayer),this.backClip=new w(this.backLayer),this.backShadowElement=this.findOrCreateLayer("back-shadow",n,1),this.backReflectionElement=this.findOrCreateLayer("back-reflection",n,2),this.bottomShadowElement=this.findOrCreateLayer("bottom-shadow",this.bottomLayer,1),this.usesBoxShadow=!t},o.prototype.setupDropShadow=function(t,e){var n=x("svg",e,{class:C("layer")});return x(t.type,n,t.attributes),n},o.prototype.wrapShapeLayer=function(t,e){var n=ht(t);I(t,C("shape-layer"));var i=this.findOrCreateLayer(e,this.el,n);return i.appendChild(t),i},o.prototype.setupDimensions=function(){this.width=this.el.offsetWidth,this.height=this.el.offsetHeight,this.center=new h(this.width/2,this.height/2),this.elementBox=this.getScaledBox(1),this.clippingBox=this.getScaledBox(this.getOption("clippingBoxScale"))},o.prototype.getScaledBox=function(t){var e=t,n=t-1,i=new h(-this.width*n,-this.height*n),r=new h(this.width*e,-this.height*n),s=new h(this.width*e,this.height*e),p=new h(-this.width*n,this.height*e);return[new f(i,r),new f(r,s),new f(s,p),new f(p,i)]},o.prototype.getConstrainedPeelPosition=function(t){return this.constraints.forEach(function(e){var n=this.getFlipConstraintOffset(e,t);n&&(e=new k(e.center,e.radius-n)),t=e.constrainPoint(t)},this),t},o.prototype.getFlipConstraintOffset=function(t,e){var n=this.getOption("flipConstraintOffset");if(t===this.flipConstraint&&n){var i=this.corner.subtract(this.center),r=this.corner.subtract(t.center),s=r.getAngle();r.rotate(-s);var p=e.subtract(t.center).rotate(-s);if(i.x*i.y<0&&(p.y*=-1),p.x>0&&p.y>0)return $(p.getAngle(),45,0)*n}},o.prototype.getPeelLineSegment=function(t){var e=this.corner.subtract(t).scale(.5),n=t.add(e);e.x===0&&e.y===0&&(e=t.subtract(this.center));var i=e.getLength(),r=Math.max(this.width,this.height)/i*10,s=e.rotate(-90).scale(r),p=n.add(s),d=n.subtract(s);return new f(p,d)},o.prototype.setBackTransform=function(t){var e=this.flipPointHorizontally(this.corner),n=(this.peelLineRotation-90)*2,i=t.subtract(e.rotate(n)),r="translate("+v(i.x)+"px, "+v(i.y)+"px) rotate("+v(n)+"deg)";F(this.backLayer,r),F(this.topShadowElement,r)},o.prototype.getPeelLineDistance=function(){var t,e,n,i;this.peelLineRotation<90?(t=o.Corners.TOP_RIGHT,e=o.Corners.BOTTOM_LEFT):this.peelLineRotation<180?(t=o.Corners.BOTTOM_RIGHT,e=o.Corners.TOP_LEFT):this.peelLineRotation<270?(t=o.Corners.BOTTOM_LEFT,e=o.Corners.TOP_RIGHT):this.peelLineRotation<360&&(t=o.Corners.TOP_LEFT,e=o.Corners.BOTTOM_RIGHT),n=this.getCornerPoint(t),i=this.getCornerPoint(e);var r=new f(n,i).scale(2),s=this.peelLineSegment.getIntersectPoint(r);if(!s)return 2;var p=n.subtract(s).getLength(),d=n.subtract(i).getLength();return p/d},o.prototype.setEffects=function(){var t=this.getPeelLineDistance();this.setTopShadow(t),this.setBackShadow(t),this.setBackReflection(t),this.setBottomShadow(t),this.setFade()},o.prototype.setTopShadow=function(t){if(this.getOption("topShadow")){var e=this.getOption("topShadowBlur"),n=this.getOption("topShadowOffsetX"),i=this.getOption("topShadowOffsetY"),r=this.getOption("topShadowAlpha"),s=this.exponential(t,5,r);this.usesBoxShadow?rt(this.topShadowElement,n,i,e,0,s):st(this.topShadowElement,n,i,e,s)}},o.prototype.distributeOrLinear=function(t,e,n){return e?et(t,n):t*n},o.prototype.exponential=function(t,e,n){return n*_(Math.pow(1+t,e)-1)},o.prototype.setBackReflection=function(t){var e=[];if(this.canSetLinearEffect("backReflection",t)){var n=this.getOption("backReflectionDistribute"),i=this.getOption("backReflectionSize"),r=this.getOption("backReflectionOffset"),s=this.getOption("backReflectionAlpha"),p=this.distributeOrLinear(t,n,i),d=t-r,y=d-p,g=y-p;e.push(A(0,0)),e.push(A(0,g)),e.push(A(s,y)),e.push(A(0,d))}z(this.backReflectionElement,180-this.peelLineRotation,e)},o.prototype.setBackShadow=function(t){var e=[];if(this.canSetLinearEffect("backShadow",t)){var n=this.getOption("backShadowSize"),i=this.getOption("backShadowOffset"),r=this.getOption("backShadowAlpha"),s=this.getOption("backShadowDistribute"),p=this.distributeOrLinear(t,s,n),d=t-i,y=d-p,g=y-p;e.push(b(0,0)),e.push(b(0,g)),e.push(b(r,y)),e.push(b(r,d))}z(this.backShadowElement,180-this.peelLineRotation,e)},o.prototype.setBottomShadow=function(t){var e=[];if(this.canSetLinearEffect("bottomShadow",t)){var n=this.getOption("bottomShadowSize"),i=this.getOption("bottomShadowOffset"),r=this.getOption("bottomShadowDarkAlpha"),s=this.getOption("bottomShadowLightAlpha"),p=this.getOption("bottomShadowDistribute"),d=t-(.025-i),y=d-this.distributeOrLinear(t,p,.03)*n-i,g=y-(.02*n-i);e=[b(0,0),b(0,g),b(s,y),b(s,d),b(r,t)]}z(this.bottomShadowElement,this.peelLineRotation+180,e)},o.prototype.canSetLinearEffect=function(t,e){return this.getOption(t)&&e>0},o.prototype.setFade=function(){var t=this.fadeThreshold,e=1,n;t&&(this.timeAlongPath!==void 0?n=this.timeAlongPath:n=this.getAmountClipped(),n>t&&(e=(1-n)/(1-t)),H(this.topLayer,e),H(this.backLayer,e),H(this.bottomShadowElement,e))},o.prototype.flipPointHorizontally=function(t){return new h(t.x-(t.x-this.center.x)*2,t.y)},o.prototype.init=function(){this.getOption("setPeelOnInit")&&this.setPeelPosition(this.corner),I(this.el,C("ready"))};function w(t,e){this.el=t,this.shape=w.createClipPath(t,e||{type:"polygon"}),F(this.el,"translate(0px,0px)")}w.getDefs=function(){return this.defs||(this.svg=x("svg",null,{class:C("svg-clip-element")}),this.defs=x("defs",this.svg)),this.defs},w.createClipPath=function(t,e){var n=w.getId(),i=x("clipPath",this.getDefs()),r=x(e.type,i,e.attributes);return V(i,"id",n),ot(t,"url(#"+n+")"),r},w.getId=function(){return"svg-clip-"+crypto.randomUUID()},w.prototype.setPoints=function(t){var e=t.map(function(n){return v(n.x)+","+v(n.y)}).join(" ");V(this.shape,"points",e)};function k(t,e){this.center=t,this.radius=e}k.prototype.containsPoint=function(t){if(this.boundingRectContainsPoint(t)){var e=this.center.x-t.x,n=this.center.y-t.y;e*=e,n*=n;var i=e+n,r=this.radius*this.radius;return i<=r}return!1},k.prototype.boundingRectContainsPoint=function(t){return t.x>=this.center.x-this.radius&&t.x<=this.center.x+this.radius&&t.y>=this.center.y-this.radius&&t.y<=this.center.y+this.radius},k.prototype.constrainPoint=function(t){if(!this.containsPoint(t)){var e=t.subtract(this.center).getAngle();t=this.center.add(new h(this.radius,0).rotate(e))}return t};function S(){this.points=[]}S.getArea=function(t){var e=0,n=0;return t.forEach(function(i,r,s){var p=s[(r+1)%s.length];e+=i.x*p.y,n+=i.y*p.x}),(e-n)/2},S.prototype.addPoint=function(t){this.points.push(t)},S.prototype.getPoints=function(){return this.points};function J(t,e,n,i){this.p1=t,this.c1=e,this.p2=i,this.c2=n}J.prototype.getPointForTime=function(t){var e=Math.pow(1-t,3),n=3*t*Math.pow(1-t,2),i=3*Math.pow(t,2)*(1-t),r=Math.pow(t,3),s=e*this.p1.x+n*this.c1.x+i*this.c2.x+r*this.p2.x,p=e*this.p1.y+n*this.c1.y+i*this.c2.y+r*this.p2.y;return new h(s,p)};function f(t,e){this.p1=t,this.p2=e}f.EPSILON=1e-6,f.prototype.getPointForTime=function(t){return this.p1.add(this.getVector().scale(t))},f.prototype.scale=function(t){var e=this.p1.add(this.p2.subtract(this.p1).scale(t)),n=this.p2.add(this.p1.subtract(this.p2).scale(t));return new f(e,n)},f.prototype.getPointDeterminant=function(t){var e=(t.x-this.p1.x)*(this.p2.y-this.p1.y)-(t.y-this.p1.y)*(this.p2.x-this.p1.x);return e>-f.EPSILON&&e<f.EPSILON&&(e=0),e},f.prototype.getIntersectPoint=function(t){var e=this;function n(g,P){return g.x*P.y-g.y*P.x}var i=e.p2.subtract(e.p1),r=t.p2.subtract(t.p1),s=n(t.p1.subtract(e.p1),i),p=n(i,r);if(p==0)return null;var d=s/p,y=n(t.p1.subtract(e.p1),r)/p;return y>=0&&y<=1&&d>=0&&d<=1?e.p1.add(i.scale(y)):null},f.prototype.getAngle=function(){return this.getVector().getAngle()},f.prototype.getVector=function(){return this.vector||(this.vector=this.p2.subtract(this.p1)),this.vector};function h(t,e){this.x=t,this.y=e}return h.DEGREES_IN_RADIANS=180/Math.PI,h.degToRad=function(t){return t/h.DEGREES_IN_RADIANS},h.radToDeg=function(t){for(var e=t*h.DEGREES_IN_RADIANS;e<0;)e+=360;return e},h.vector=function(t,e){var n=h.degToRad(t);return new h(Math.cos(n)*e,Math.sin(n)*e)},h.prototype.add=function(t){return new h(this.x+t.x,this.y+t.y)},h.prototype.subtract=function(t){return new h(this.x-t.x,this.y-t.y)},h.prototype.scale=function(t){return new h(this.x*t,this.y*t)},h.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},h.prototype.getAngle=function(){return h.radToDeg(Math.atan2(this.y,this.x))},h.prototype.setAngle=function(t){return h.vector(t,this.getLength())},h.prototype.rotate=function(t){return this.setAngle(this.getAngle()+t)},Q(),o}const yt={class:"peel-top"},vt={class:"peel-back"},wt={class:"peel-bottom"},Pt=ct({__name:"Peel",props:{handleElement:null,peelPosition:null,corner:null,constraints:null,drag:{type:Boolean},mode:null,fadeThreshold:null,peelPath:null,options:null},emits:["drag"],setup(R,{expose:B,emit:M}){const c=R,E=gt(),L=Z(null),u=Z(null);function T(){u.value.removeEvents(),u.value.dragEventsSetup=!1,u.value.dragHandlers=[],u.value.handleDrag((a,l,m)=>M("drag",{event:a,x:l,y:m,amountClipped:u.value.getAmountClipped()}),c.handleElement),c.drag&&u.value.handleDrag((a,l,m)=>u.value.setPeelPosition(l,m),c.handleElement)}return ut(()=>{if(u.value=new E(L.value,c.options),T(),c.peelPosition&&u.value.setPeelPosition(c.peelPosition.x,c.peelPosition.y),c.corner)if(c.corner.hasOwnProperty("x")&&c.corner.hasOwnProperty("y")){const{x:a,y:l}=c.corner;u.value.setCorner(a,l)}else u.value.setCorner(c.corner);c.constraints&&c.constraints.forEach(a=>{u.value.addPeelConstraint(a)}),c.mode&&u.value.setMode(c.mode),c.fadeThreshold&&u.value.setFadeThreshold(c.fadeThreshold),c.peelPath&&u.value.setPeelPath(...c.peelPath)}),O(()=>c.handleElement,a=>{a&&T()}),O(()=>c.peelPosition,a=>{a&&u.value.setPeelPosition(a.x,a.y)}),O(()=>c.corner,a=>{if(a)if(a.hasOwnProperty("x")&&a.hasOwnProperty("y")){const{x:l,y:m}=c.corner;u.value.setCorner(l,m)}else u.value.setCorner(c.corner)}),O(()=>c.constraints,a=>{a&&(u.value.constraints=[],a.forEach(l=>{u.value.addPeelConstraint(l)}))}),O(()=>c.mode,a=>{a&&u.value.setMode(a)}),O(()=>c.fadeThreshold,a=>{a&&u.value.setFadeThreshold(a)}),O(()=>c.peelPath,a=>{a&&u.value.setPeelPath(...a)}),B({peel:u}),(a,l)=>(lt(),dt("div",{ref_key:"peelRef",ref:L,class:"peel"},[U("div",yt,[Y(a.$slots,"top")]),U("div",vt,[Y(a.$slots,"back")]),U("div",wt,[Y(a.$slots,"bottom")])],512))}});export{ft as d,Pt as m};
